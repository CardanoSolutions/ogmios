asyncapi: '2.4.0'
info:
  title: Ogmios
  version: '5.6.0'
  description: |

    ### Protocols

    - [Chain synchronization](#operation-publish-/?chain-synchronization)
    - [Ledger state queries](#operation-publish-/?ledger-state-queries)
    - [Transaction submission](#operation-publish-/?transaction-submission)
    - [Mempool monitoring](#operation-publish-/?transaction-monitoring)

    ### Schemas

    Here's a shortlist that contains a few handpicked schema definitions. Find **all definitions** at the bottom of this document.

    - [Block](#schema-Block)
    - Protocol Parameters
      - [Byron](#schema-ProtocolParameters[Byron])
      - [Shelley](#schema-ProtocolParameters[Shelley])
      - [Alonzo](#schema-ProtocolParameters[Alonzo])
      - [Babbage](#schema-ProtocolParameters[Babbage])
    - Transaction
      - [Byron](#schema-Tx[Byron])
      - [Shelley](#schema-Tx[Shelley])
      - [Allegra](#schema-Tx[Allegra])
      - [Mary](#schema-Tx[Mary])
      - [Alonzo](#schema-Tx[Alonzo])
      - [Babbage](#schema-Tx[Babbage])
    - [Transaction Submission Errors](#schema-SubmitTxError)
    - [Transaction Evaluation Failures](#schema-EvaluationFailure)
    - [Value](#schema-Value)

  license:
    name: MPL-2.0
    url: https://raw.githubusercontent.com/CardanoSolutions/ogmios/master/LICENSE

defaultContentType: application/json

tags:
  - name: Raw JSON Schema
    externalDocs:
      url: https://ogmios.dev/ogmios.json

servers:
  localhost:
    url: "127.0.0.1:{port}"
    protocol: ws
    description: |
      Default instance, when running a local server.
    variables:
      port:
        default: "1337"

  demeter:
    url: "ogmios-{network}-api-{project-id}.{region}.demeter.run"
    protocol: wss
    description: |
      Hosted Ogmios instances on [Demeter.run](https://demeter.run), by TxPipe.
    variables:
      project-id: {}
      region:
        enum:
          - us1
      network:
        enum:
          - mainnet
          - preview
          - preprod

  dandelion:
    url: "ogmios-api.{network}.dandelion.link"
    protocol: wss
    description: |
      Hosted Dandelion's instances, by [Gimbalabs](https://gimbalabs.com/).
    variables:
      network:
        enum:
          - mainnet

channels:
  /?chain-synchronization:
    description: |
      Input & output messages regarding the [chain synchronization](/mini-protocols/local-chain-sync) protocol.

      <p align="right"><a href="#asyncapi">Top ⬆️</a></p>
    publish:
      operationId: local-chain-sync[inputs]
      message:
        oneOf:
          - $ref: "#/components/messages/NextBlock"
          - $ref: "#/components/messages/FindIntersection"

    subscribe:
      operationId: local-chain-sync[outputs]
      message:
        oneOf:
          - $ref: "#/components/messages/NextBlockResponse"
          - $ref: "#/components/messages/FindIntersectionResponse"

  /?transaction-submission:
    description: |
      Input & output messages regarding the [transaction submission](/mini-protocols/local-tx-submission) protocol.

      <p align="right"><a href="#asyncapi">Top ⬆️</a></p>
    publish:
      operationId: local-tx-submission[inputs]
      message:
        oneOf:
          - $ref: "#/components/messages/SubmitTransaction"
          - $ref: "#/components/messages/EvaluateTransaction"
    subscribe:
      operationId: local-tx-submission[outputs]
      message:
        oneOf:
          - $ref: "#/components/messages/SubmitTransactionResponse"
          - $ref: "#/components/messages/EvaluateTransactionResponse"


  /?mempool-monitoring:
    description: |
      Input & output messages regarding the [mempool monitoring](/mini-protocols/local-tx-monitor) protocol.

      <p align="right"><a href="#asyncapi">Top ⬆️</a></p>
    publish:
      operationId: local-tx-monitor[inputs]
      message:
        oneOf:
          - $ref: "#/components/messages/AcquireMempool"
          - $ref: "#/components/messages/NextTransaction"
          - $ref: "#/components/messages/HasTransaction"
          - $ref: "#/components/messages/SizeOfMempool"
          - $ref: "#/components/messages/ReleaseMempool"
    subscribe:
      operationId: local-tx-monitor[outputs]
      message:
        oneOf:
          - $ref: "#/components/messages/AcquireMempoolResponse"
          - $ref: "#/components/messages/NextTransactionResponse"
          - $ref: "#/components/messages/HasTransactionResponse"
          - $ref: "#/components/messages/SizeOfMempoolResponse"
          - $ref: "#/components/messages/ReleaseMempool"

  /?ledger-state-queries:
    description: |
      Input & output messages regarding the [ledger state queries](/mini-protocols/local-state-query) protocol.

      <p align="right"><a href="#asyncapi">Top ⬆️</a></p>
    publish:
      operationId: local-state-query[inputs]
      message:
        oneOf:
          - $ref: "#/components/messages/AcquireLedgerState"
          - $ref: "#/components/messages/QueryLedgerStateEpoch"
          - $ref: "#/components/messages/QueryLedgerStateEraStart"
          - $ref: "#/components/messages/QueryLedgerStateEraSummaries"
          - $ref: "#/components/messages/QueryLedgerStateLiveStakeDistribution"
          - $ref: "#/components/messages/QueryLedgerStateProjectedRewards"
          - $ref: "#/components/messages/QueryLedgerStateProtocolParameters"
          - $ref: "#/components/messages/QueryLedgerStateProposedProtocolParameters"
          - $ref: "#/components/messages/QueryLedgerStateRewardAccountSummaries"
          - $ref: "#/components/messages/QueryLedgerStateRewardsProvenance"
          - $ref: "#/components/messages/QueryLedgerStateStakePoolParameters"
          - $ref: "#/components/messages/QueryLedgerStateStakePools"
          - $ref: "#/components/messages/QueryLedgerStateTip"
          - $ref: "#/components/messages/QueryLedgerStateUtxo"
          - $ref: "#/components/messages/QueryNetworkBlockHeight"
          - $ref: "#/components/messages/QueryNetworkGenesisConfiguration"
          - $ref: "#/components/messages/QueryNetworkStartTime"
          - $ref: "#/components/messages/QueryNetworkTip"
          - $ref: "#/components/messages/ReleaseLedgerState"

    subscribe:
      operationId: local-state-query[outputs]
      message:
        oneOf:
          - $ref: "#/components/messages/AcquireLedgerStateResponse"
          - $ref: "#/components/messages/AcquireLedgerStateResponse"
          - $ref: "#/components/messages/QueryLedgerStateEpochResponse"
          - $ref: "#/components/messages/QueryLedgerStateEraStartResponse"
          - $ref: "#/components/messages/QueryLedgerStateEraSummariesResponse"
          - $ref: "#/components/messages/QueryLedgerStateLiveStakeDistributionResponse"
          - $ref: "#/components/messages/QueryLedgerStateProjectedRewardsResponse"
          - $ref: "#/components/messages/QueryLedgerStateProtocolParametersResponse"
          - $ref: "#/components/messages/QueryLedgerStateProposedProtocolParametersResponse"
          - $ref: "#/components/messages/QueryLedgerStateRewardAccountSummariesResponse"
          - $ref: "#/components/messages/QueryLedgerStateRewardsProvenanceResponse"
          - $ref: "#/components/messages/QueryLedgerStateStakePoolParametersResponse"
          - $ref: "#/components/messages/QueryLedgerStateStakePoolsResponse"
          - $ref: "#/components/messages/QueryLedgerStateTipResponse"
          - $ref: "#/components/messages/QueryLedgerStateUtxoResponse"
          - $ref: "#/components/messages/QueryNetworkBlockHeightResponse"
          - $ref: "#/components/messages/QueryNetworkGenesisConfigurationResponse"
          - $ref: "#/components/messages/QueryNetworkStartTimeResponse"
          - $ref: "#/components/messages/QueryNetworkTipResponse"
          - $ref: "#/components/messages/ReleaseLedgerStateResponse"

components:
  messages:
    FindIntersection:
      title: FindIntersection
      name: "since v6.0.0"
      description: |
        Ask for an intersection between the server's local chain and the given points.
      payload:
        $ref: "/ogmios.json#/properties/FindIntersection"

    FindIntersectionResponse:
      title: FindIntersectionResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/FindIntersectionResponse"

    NextBlock:
      title: NextBlock
      name: "since v6.0.0"
      description: |
        Request next block from the current cardano-node's cursor.
      payload:
        $ref: "/ogmios.json#/properties/NextBlock"

    NextBlockResponse:
      title: NextBlockResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/NextBlockResponse"

    SubmitTransaction:
      title: SubmitTransaction
      name: "since v6.0.0"
      description: |
        Submit a signed and serialized transaction to the network.
      payload:
        $ref: "/ogmios.json#/properties/SubmitTransaction"

    SubmitTransactionResponse:
      title: SubmitTransactionResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/SubmitTransactionResponse"

    EvaluateTransaction:
      title: EvaluateTransaction
      name: "since v6.0.0"
      description: |
        Evaluate execution units of scripts in a well-formed transaction.
      payload:
        $ref: "/ogmios.json#/properties/EvaluateTransaction"

    EvaluateTransactionResponse:
      title: EvaluateTransactionResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/EvaluateTransactionResponse"

    AcquireMempool:
      title: AcquireMempool
      name: "since v6.0.0"
      description: |
        Acquire a mempool snapshot. This is blocking until a new (i.e different) snapshot is available.
      payload:
        $ref: "/ogmios.json#/properties/AcquireMempool"

    AcquireMempoolResponse:
      title: AcquireMempoolResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/AcquireMempoolResponse"

    NextTransaction:
      title: NextTransaction
      name: "since v6.0.0"
      description: |
        Request the next mempool transaction from an acquired snapshot.
      payload:
        $ref: "/ogmios.json#/properties/NextTransaction"

    NextTransactionResponse:
      title: NextTransactionResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/NextTransactionResponse"

    HasTransaction:
      title: HasTransaction
      name: "since v6.0.0"
      description: |
        Ask whether a given transaction is present in the acquired mempool snapshot.
      payload:
        $ref: "/ogmios.json#/properties/HasTransaction"

    HasTransactionResponse:
      title: HasTransactionResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/HasTransactionResponse"

    SizeOfMempool:
      title: SizeOfMempool
      name: "since v6.0.0"
      description: |
        Get size and capacities of the mempool (acquired snapshot).
      payload:
        $ref: "/ogmios.json#/properties/SizeOfMempool"

    SizeOfMempoolResponse:
      title: SizeOfMempoolResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/SizeOfMempoolResponse"

    ReleaseMempool:
      title: ReleaseMempool
      name: "since v6.0.0"
      description: |
        Release a previously acquired mempool snapshot
      payload:
        $ref: "/ogmios.json#/properties/ReleaseMempool"

    ReleaseMempoolResponse:
      title: ReleaseMempoolResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/ReleaseMempoolResponse"

    AcquireLedgerState:
      title: AcquireLedgerState
      name: "since v6.0.0"
      description: |
        Acquire a point on chain from which to run multiple queries.
      payload:
        $ref: "/ogmios.json#/properties/AcquireLedgerState"

    AcquireLedgerStateResponse:
      title: AcquireLedgerStateResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/AcquireLedgerStateResponse"

    QueryLedgerStateEpoch:
      title: QueryLedgerStateEpoch
      name: "since v6.0.0"
      description: |
        Query the current epoch of the ledger.
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateEpoch"

    QueryLedgerStateEraStart:
      title: QueryLedgerStateEraStart
      name: "since v6.0.0"
      description: |
        Query information regarding the beginning of the current ledger era.
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateEraStart"

    QueryLedgerStateEraSummaries:
      title: QueryLedgerStateEraSummaries
      name: "since v6.0.0"
      description: |
        Query era bounds and slot parameters details, required for proper sloting arithmetic.
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateEraSummaries"

    QueryLedgerStateLiveStakeDistribution:
      title: QueryLedgerStateLiveStakeDistribution
      name: "since v6.0.0"
      description: |
        Query distribution of the stake across all known stake pools, relative to the total stake in the network.
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateLiveStakeDistribution"

    QueryLedgerStateProjectedRewards:
      title: QueryLedgerStateProjectedRewards
      name: "since v6.0.0"
      description: |
        Query the projected rewards of an account in a context where the top stake pools are fully saturated. This projection gives, in principle, a ranking of stake pools that maximizes delegator rewards.
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateProjectedRewards"

    QueryLedgerStateProtocolParameters:
      title: QueryLedgerStateProtocolParameters
      name: "since v6.0.0"
      description: |
        Query the current protocol parameters.
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateProtocolParameters"

    QueryLedgerStateProposedProtocolParameters:
      title: QueryLedgerStateProposedProtocolParameters
      name: "since v6.0.0"
      description: |
        Query the last update proposal w.r.t. protocol parameters, if any.
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateProposedProtocolParameters"

    QueryLedgerStateRewardAccountSummaries:
      title: QueryLedgerStateRewardAccountSummaries
      name: "since v6.0.0"
      description: |
        Query current delegation settings and rewards of chosen reward accounts.
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateRewardAccountSummaries"

    QueryLedgerStateRewardsProvenance:
      title: QueryLedgerStateRewardsProvenance
      name: "since v6.0.0"
      description: |
        Get details about rewards calculation for the ongoing epoch.
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateRewardsProvenance"

    QueryLedgerStateStakePools:
      title: QueryLedgerStateStakePools
      name: "since v6.0.0"
      description: |
        Query the list of all stake pool identifiers currently registered and active.
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateStakePools"

    QueryLedgerStateStakePoolParameters:
      title: QueryLedgerStateStakePoolParameters
      name: "since v6.0.0"
      description: |
        Query registered parameters for given stake pools.
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateStakePoolParameters"

    QueryLedgerStateTip:
      title: QueryLedgerStateTip
      name: "since v6.0.0"
      description: |
        Query the current tip the ledger is at. Said differently, the slot number and header hash of the last block that has been processed by the ledger.
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateTip"

    QueryLedgerStateUtxo:
      title: QueryLedgerStateUtxo
      name: "since v6.0.0"
      description: |
        Query the current Utxo set, restricted to some output references or addresses.
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateUtxo"

    QueryNetworkBlockHeight:
      title: QueryNetworkBlockHeight
      name: "since v6.0.0"
      description: |
        Query the network’s highest block number.
      payload:
        $ref: "/ogmios.json#/properties/QueryNetworkBlockHeight"

    QueryNetworkGenesisConfiguration:
      title: QueryNetworkGenesisConfiguration
      name: "since v6.0.0"
      description: |
        Query the genesis configuration of a given era.
      payload:
        $ref: "/ogmios.json#/properties/QueryNetworkGenesisConfiguration"

    QueryNetworkStartTime:
      title: QueryNetworkStartTime
      name: "since v6.0.0"
      description: |
        Query the network start time.
      payload:
        $ref: "/ogmios.json#/properties/QueryNetworkStartTime"

    QueryNetworkTip:
      title: QueryNetworkTip
      name: "since v6.0.0"
      description: |
        Get the current network tip. Said differently, this is the most recent slot and block header hash that the node it aware of.
      payload:
        $ref: "/ogmios.json#/properties/QueryNetworkTip"

    QueryLedgerStateEpochResponse:
      title: QueryLedgerStateEpochResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateEpochResponse"

    QueryLedgerStateEraStartResponse:
      title: QueryLedgerStateEraStartResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateEraStartResponse"

    QueryLedgerStateEraSummariesResponse:
      title: QueryLedgerStateEraSummariesResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateEraSummariesResponse"

    QueryLedgerStateLiveStakeDistributionResponse:
      title: QueryLedgerStateLiveStakeDistributionResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateLiveStakeDistributionResponse"

    QueryLedgerStateProjectedRewardsResponse:
      title: QueryLedgerStateProjectedRewardsResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateProjectedRewardsResponse"

    QueryLedgerStateProtocolParametersResponse:
      title: QueryLedgerStateProtocolParametersResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateProtocolParametersResponse"

    QueryLedgerStateProposedProtocolParametersResponse:
      title: QueryLedgerStateProposedProtocolParametersResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateProposedProtocolParametersResponse"

    QueryLedgerStateRewardAccountSummariesResponse:
      title: QueryLedgerStateRewardAccountSummariesResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateRewardAccountSummariesResponse"

    QueryLedgerStateRewardsProvenanceResponse:
      title: QueryLedgerStateRewardsProvenanceResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateRewardsProvenanceResponse"

    QueryLedgerStateStakePoolsResponse:
      title: QueryLedgerStateStakePoolsResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateStakePoolsResponse"

    QueryLedgerStateStakePoolParametersResponse:
      title: QueryLedgerStateStakePoolParametersResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateStakePoolParametersResponse"

    QueryLedgerStateTipResponse:
      title: QueryLedgerStateTipResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateTipResponse"

    QueryLedgerStateUtxoResponse:
      title: QueryLedgerStateUtxoResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryLedgerStateUtxoResponse"

    QueryNetworkBlockHeightResponse:
      title: QueryNetworkBlockHeightResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryNetworkBlockHeightResponse"

    QueryNetworkGenesisConfigurationResponse:
      title: QueryNetworkGenesisConfigurationResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryNetworkGenesisConfigurationResponse"

    QueryNetworkStartTimeResponse:
      title: QueryNetworkStartTimeResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryNetworkStartTimeResponse"

    QueryNetworkTipResponse:
      title: QueryNetworkTipResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/QueryNetworkTipResponse"

    ReleaseLedgerState:
      title: ReleaseLedgerState
      name: "since v6.0.0"
      description: |
        Release a point on chain previously acquired.
      payload:
        $ref: "/ogmios.json#/properties/ReleaseLedgerState"

    ReleaseLedgerStateResponse:
      title: ReleaseLedgerStateResponse
      name: "since v6.0.0"
      payload:
        $ref: "/ogmios.json#/properties/ReleaseLedgerStateResponse"
