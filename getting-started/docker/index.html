<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.76.5"><meta name=description content="User manual for Ogmios, a lightweight protocol translation service for Cardano."><meta name=author content="KtorZ <matthias.benkort@gmail.com>"><link rel=icon href=/images/favicon.png type=image/png><title>Docker - Ogmios</title><link href=/css/nucleus.css?1704797615 rel=stylesheet><link href=/css/fontawesome-all.min.css?1704797615 rel=stylesheet><link href=/css/hybrid.css?1704797615 rel=stylesheet><link href=/css/featherlight.min.css?1704797615 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1704797615 rel=stylesheet><link href=/css/auto-complete.css?1704797615 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1704797615 rel=stylesheet><link href=/css/theme.css?1704797615 rel=stylesheet><link href=/css/tabs.css?1704797615 rel=stylesheet><link href=/css/hugo-theme.css?1704797615 rel=stylesheet><link href=/css/theme-mine.css?1704797615 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1704797615></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><style type=text/css>table.users{text-align:center;table-layout:fixed;border:none;border-collapse:collapse}table.users td{padding:0;border:none}table.users img{max-width:100px;max-height:100px;margin:1rem auto!important;border-radius:50%}@media(max-width:1200px){table.users img{max-width:70px;max-height:70px;margin:.75rem auto!important}table.users tr:nth-child(2n){display:none}}@media(max-width:900px){table.users img{max-width:60px;max-height:60px;margin:.5rem auto!important}}@media(max-width:500px){table.users img{max-width:40px;max-height:40px;margin:.5rem .25rem}}</style></head><body data-url=/getting-started/docker/><nav id=sidebar><div id=header-wrapper><div id=header><a href=/><img alt=ogmios src=/ogmios__light.png></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1704797615></script><script type=text/javascript src=/js/auto-complete.js?1704797615></script><script type=text/javascript>var baseurl="https:\/\/ogmios.dev";</script><script type=text/javascript src=/js/search.js?1704797615></script></div><div class=highlightable><ul class=topics><li data-nav-id=/getting-started/ title="Getting started" class="dd-item
parent"><a href=/getting-started/><b>1. </b>Getting started</a><ul><li data-nav-id=/getting-started/docker/ title=Docker class="dd-item active"><a href=/getting-started/docker/>Docker</a></li><li data-nav-id=/getting-started/building/ title=Building class=dd-item><a href=/getting-started/building/>Building</a></li><li data-nav-id=/getting-started/testing/ title=Testing class=dd-item><a href=/getting-started/testing/>Testing</a></li><li data-nav-id=/getting-started/monitoring/ title=Monitoring class=dd-item><a href=/getting-started/monitoring/>Monitoring</a></li><li data-nav-id=/getting-started/basics/ title=Basics class=dd-item><a href=/getting-started/basics/>Basics</a></li></ul></li><li data-nav-id=/mini-protocols/ title=Mini-Protocols class=dd-item><a href=/mini-protocols/><b>2. </b>Mini-Protocols</a><ul><li data-nav-id=/mini-protocols/local-chain-sync/ title="Chain synchronization" class=dd-item><a href=/mini-protocols/local-chain-sync/>Chain synchronization</a></li><li data-nav-id=/mini-protocols/local-state-query/ title="Ledger state queries" class=dd-item><a href=/mini-protocols/local-state-query/>Ledger state queries</a></li><li data-nav-id=/mini-protocols/local-tx-submission/ title="Transaction submission" class=dd-item><a href=/mini-protocols/local-tx-submission/>Transaction submission</a></li><li data-nav-id=/mini-protocols/local-tx-monitor/ title="Mempool monitoring" class=dd-item><a href=/mini-protocols/local-tx-monitor/>Mempool monitoring</a></li></ul></li><li data-nav-id=/clients/ title=Clients class=dd-item><a href=/clients/><b>3. </b>Clients</a></li><li data-nav-id=/api/ title="API Reference (v6.0.*)" class=dd-item><a href=/api/><b>4. </b>API Reference (v6.0.*)</a><ul><li data-nav-id=/api/v5.6/ title="Archive (v5.6.*)" class=dd-item><a href=/api/v5.6/>Archive (v5.6.*)</a></li></ul></li><li data-nav-id=/changelog/ title=Changelog class=dd-item><a href=/changelog/><b>5. </b>Changelog</a></li><li data-nav-id=/faq/ title=F.A.Q class=dd-item><a href=/faq/><b>6. </b>F.A.Q</a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/cardanosolutions/ogmios><i class="fab fa-github"></i>Source code</a></li><li><a class=padding href=https://github.com/cardanosolutions/ogmios/issues><i class="fas fa-solid fa-bullseye"></i>Issues Tracking</a></li><li><a class=padding href=https://discord.gg/ZeyDn65t5v><i class="fab fa-discord"></i>Discord (#ogmios)</a></li><li><a class=padding href=https://github.com/CardanoSolutions/ogmios/tree/master/architectural-decisions/accepted><i class="fas fa-solid fa-file-code"></i>Architectural Decisions Record</a></li><li><a class=padding href=https://github.com/CardanoSolutions/ogmios/tree/master/server/test/vectors><i class="fas fa-solid fa-vector-square"></i>Test vectors</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/>Overview</a> > <a href=/getting-started/>Getting started</a> > Docker</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#-overview>ğŸ³ Overview</a></li><li><a href=#cardano-node-ogmios-easiest>cardano-node-ogmios (easiest)</a><ul><li><a href=#running>Running</a></li></ul></li><li><a href=#ogmios-standalone-more-advanced>Ogmios standalone (more advanced)</a><ul><li><a href=#running-bare-hands>Running (bare hands)</a></li><li><a href=#configuration>Configuration</a></li><li><a href=#running-docker-compose>Running (docker-compose)</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Docker</h1><h2 id=-overview>ğŸ³ Overview</h2><p>The easiest way to get started with Ogmios is to use <a href=https://www.docker.com/>docker</a>. This guide won&rsquo;t cover installing docker, so make sure you have the Docker daemon installed and running.</p><p>Ogmios docker images come in two flavours: <code>cardano-node-ogmios</code> and <code>ogmios</code>. The former is used to run a single container that bundles both a Cardano-node and an Ogmios server running side-by-side. It is likely the easiest way to get started. The latter is a standalone Ogmios server, and you&rsquo;ll need to run that container in orchestration with a cardano-node; this is made relatively easy with <a href=https://docs.docker.com/compose/>Docker compose</a>.</p><p>Images are uploaded to <a href=https://hub.docker.com/u/cardanosolutions>Dockerhub</a>
and are tagged using release versions combined with the supported network name,
or with <code>:latest</code> if you&rsquo;re living on the edge. If using the <code>mainnet</code> image
you can omit the network name.</p><table><thead><tr><th>image</th><th>repository</th><th>tags</th></tr></thead><tbody><tr><td>cardano-node-ogmios</td><td><a href=https://hub.docker.com/repository/docker/cardanosolutions/cardano-node-ogmios>cardanosolutions/cardano-node-ogmios</a></td><td><code>latest</code><br><code>latest-{NETWORK}</code><br><code>v*.*.*_{CARDANO_NODE_VERSION}</code><br><code>v*.*.*_{CARDANO_NODE_VERSION}-{NETWORK}</code></td></tr><tr><td>ogmios</td><td><a href=https://hub.docker.com/repository/docker/cardanosolutions/ogmios>cardanosolutions/ogmios</a></td><td><code>latest</code><br><code>v*.*.*</code></td></tr></tbody></table><p>Supported NETWORK names:</p><ul><li><code>mainnet</code></li><li><code>preview</code></li><li><code>preprod</code></li></ul><div class="notices info"><p>Building images from sources is currently not available. Building is done outside of Docker to produce a binary static executable which is then mounted as an image. Hence, building the docker image assumes that you&rsquo;ve built the application to begin with. The <a href=https://github.com/CardanoSolutions/ogmios/blob/master/Dockerfile>Dockerfile</a> expects a pre-built executable in the folder <code>server/bin</code>.<br><br>Refer to <a href=/getting-started/building/>the next section</a> for building Ogmios. Then simply run <code>docker buildx build --target ogmios</code> to build ogmios' standalone or <code>docker buildx build</code> to build the default cardano-node + ogmios image.</p></div><h2 id=cardano-node-ogmios-easiest>cardano-node-ogmios (easiest)</h2><h3 id=running>Running</h3><p>Assuming you&rsquo;ve pulled or build the image (otherwise, see below), you can start a cardano-node with an ogmios server in one single command:</p><pre><code class=language-console data-lang=console>$ docker run -it \
  --name cardano-node-ogmios \
  -p 1337:1337 \
  -v cardano-node-ogmios-mainnet-db:/db \
  cardanosolutions/cardano-node-ogmios:latest
</code></pre><p>Let&rsquo;s explore a bit the various options:</p><ul><li><p><code>-it</code> is a shorthand for two options <code>-i</code> & <code>-t</code> to enable some interactive support with the container. This is necessary to pass OS signals (e.g. SIGINT from CTRL-C) from the host to the container.</p></li><li><p><code>--name</code> gives a name to the container, to easily identify it later in commands such as <code>docker container ps</code>.</p></li><li><p><code>-p</code> instruments docker to bind ports of the container to host. The image exposes 4 ports that can be bound to any (available) port of the host system. Here&rsquo;s the complete list of TCP ports exposed by the image:</p><table><thead><tr><th>Port Number</th><th>Description</th></tr></thead><tbody><tr><td>1337</td><td>Ogmios port, for both the WebSocket and the HTTP server.</td></tr><tr><td>3000</td><td>cardano-node&rsquo;s relay port</td></tr><tr><td>12788</td><td>cardano-node&rsquo;s EKG port</td></tr><tr><td>12798</td><td>cardano-node&rsquo;s Prometheus port</td></tr></tbody></table></li><li><p><code>-v</code> mounts a shared volume with the container on your host machine, either via bind mounts or named volumes.</p><table><thead><tr><th>Mount Point</th><th>Description</th></tr></thead><tbody><tr><td><code>db</code></td><td>Persist the cardano-node&rsquo;s database to avoid re-syncing the chain whenever a new container is run. This is done on every version upgrade and is recommended for most use-cases. Make sure to use different names for different networks as the data aren&rsquo;t compatible between them!</td></tr><tr><td><code>ipc</code></td><td>Bind <code>/ipc</code> to get access to the cardano-node&rsquo;s local socket if you use the image in a multi-container stack with an external Haskell client.</td></tr></tbody></table></li></ul><p>Find more about run options in the docker user documentation.</p><h2 id=ogmios-standalone-more-advanced>Ogmios standalone (more advanced)</h2><h3 id=running-bare-hands>Running (bare hands)</h3><p>Assuming that you have a cardano-node running, with its domain socket (<code>node.socket</code>) available under <code>./ipc</code>, you may start a standalone Ogmios container as follows:</p><pre><code class=language-console data-lang=console>$ docker run --rm \
  --name ogmios \
  -p 1337:1337 \
  -v ./ipc:/ipc \
  cardanosolutions/ogmios:latest \
    --node-socket /ipc/node.socket \
    --node-config /config/mainnet/cardano-node/config.json \
    --host 0.0.0.0
</code></pre><p>Note that the <code>--host</code> argument is necessary to bind the server from within the container.</p><h3 id=configuration>Configuration</h3><p>Configuration files are available from within the image under <code>/config</code> in folders named after the supported networks.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>/config
 â”œâ”€â”€ mainnet
 â”‚Â Â  â”œâ”€â”€ cardano-node
 â”‚Â Â  â”‚Â Â  â”œâ”€â”€ config.json
 â”‚Â Â  â”‚Â Â  â””â”€â”€ topology.json
 â”‚Â Â  â””â”€â”€ genesis
 â”‚Â Â      â”œâ”€â”€ alonzo.json
 â”‚Â Â      â”œâ”€â”€ byron.json
 â”‚Â Â      â”œâ”€â”€ conway.json
 â”‚Â Â      â””â”€â”€ shelley.json
 â”œâ”€â”€ preprod
 â”‚Â Â  â”œâ”€â”€ cardano-node
 â”‚Â Â  â”‚Â Â  â”œâ”€â”€ config.json
 â”‚Â Â  â”‚Â Â  â””â”€â”€ topology.json
 â”‚Â Â  â””â”€â”€ genesis
 â”‚Â Â      â”œâ”€â”€ alonzo.json
 â”‚Â Â      â”œâ”€â”€ byron.json
 â”‚Â Â      â”œâ”€â”€ conway.json
 â”‚Â Â      â””â”€â”€ shelley.json
 â””â”€â”€ preview
     â”œâ”€â”€ cardano-node
     â”‚Â Â  â”œâ”€â”€ config.json
     â”‚Â Â  â””â”€â”€ topology.json
     â””â”€â”€ genesis
         â”œâ”€â”€ alonzo.json
         â”œâ”€â”€ byron.json
         â””â”€â”€ shelley.json
</code></pre></div><h3 id=running-docker-compose>Running (docker-compose)</h3><p>Alternatively, you may use Docker&rsquo;s <a href=https://docs.docker.com/compose/>compose</a> to run either Ogmios standalone, or an orchestration of cardano-node and Ogmios talking to each other. Compose is a handy tool to orchestrate multiple services packaged as containers. It works from a compose file which is available in the project repository, get it via:</p><pre><code class=language-console data-lang=console>$ git clone --depth 1 git@github.com:cardanosolutions/ogmios.git
$ cd cardano-ogmios
</code></pre><p>Then, starts the components stack using:</p><pre><code class=language-console data-lang=console>$ docker-compose up
</code></pre><p>ğŸ‘†This will run and connect:</p><ul><li>A <a href=https://github.com/input-output-hk/cardano-node/>Cardano node</a>, connected to mainnet.</li><li>An Ogmios server using the <a href=https://hub.docker.com/r/cardanosolutions/ogmios>latest Dockerhub build</a>, listening to localhost on port: 1337.</li></ul><p>Once finish, tear the stack down using:</p><pre><code class=language-console data-lang=console>$ docker-compose down
</code></pre><h4 id=configuration-1>Configuration</h4><p>The compose file allows for minimal (albeit useful) configuration parameters via environment variables:</p><table><thead><tr><th>Variable</th><th>Description</th><th>Values</th><th>Default</th></tr></thead><tbody><tr><td><code>NETWORK</code></td><td>Which Cardano network to connect to. This impacts both Ogmios and the underlying Cardano node.</td><td><code>mainnet</code>, <code>preview</code>, <code>preprod</code></td><td><code>mainnet</code></td></tr><tr><td><code>OGMIOS_PORT</code></td><td>Which ports to listen to (both for WebSockets and health endpoints)</td><td>Any valid port number.</td><td><code>1337</code></td></tr></tbody></table><div class="notices tip"><p>Ogmios doesn&rsquo;t use any form of persistent storage, but cardano-node does. The mainnet, preview and preprod databases are not compatible, so it is recommended to instrument docker-compose to use different namespaces for different networks (so that you can switch from one another without risking any database conflicts). Compose can do this easily by passing an extra flag: <code>--project-name</code>.</p></div><p>For example, for running cardano-node + ogmios on the preprod network, listening to tcp/1338, do:</p><pre><code class=language-console data-lang=console>$ NETWORK=preprod OGMIOS_PORT=1338 docker-compose --project-name cardano-ogmios-preprod up
</code></pre><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/getting-started/ title="Getting started"><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/getting-started/building/ title=Building style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1704797615></script><script src=/js/perfect-scrollbar.min.js?1704797615></script><script src=/js/perfect-scrollbar.jquery.min.js?1704797615></script><script src=/js/jquery.sticky.js?1704797615></script><script src=/js/featherlight.min.js?1704797615></script><script src=/js/highlight.pack.js?1704797615></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom-3.6.0.js?1704797615></script><script src=/js/learn.js?1704797615></script><script src=/js/hugo-learn.js?1704797615></script></body></html>