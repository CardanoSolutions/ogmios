<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.76.5"><meta name=description content="User manual for Ogmios, a lightweight protocol translation service for Cardano."><meta name=author content="KtorZ <matthias.benkort@gmail.com>"><link rel=icon href=/images/favicon.png type=image/png><title>Basics - Ogmios</title><link href=/css/nucleus.css?1692296671 rel=stylesheet><link href=/css/fontawesome-all.min.css?1692296671 rel=stylesheet><link href=/css/hybrid.css?1692296671 rel=stylesheet><link href=/css/featherlight.min.css?1692296671 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1692296671 rel=stylesheet><link href=/css/auto-complete.css?1692296671 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1692296671 rel=stylesheet><link href=/css/theme.css?1692296671 rel=stylesheet><link href=/css/tabs.css?1692296671 rel=stylesheet><link href=/css/hugo-theme.css?1692296671 rel=stylesheet><link href=/css/theme-mine.css?1692296671 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1692296671></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><style type=text/css>table.users{text-align:center;table-layout:fixed;border:none;border-collapse:collapse}table.users td{padding:0;border:none}table.users img{max-width:100px;max-height:100px;margin:1rem auto!important;border-radius:50%}@media(max-width:1200px){table.users img{max-width:70px;max-height:70px;margin:.75rem auto!important}table.users tr:nth-child(2n){display:none}}@media(max-width:900px){table.users img{max-width:60px;max-height:60px;margin:.5rem auto!important}}@media(max-width:500px){table.users img{max-width:40px;max-height:40px;margin:.5rem .25rem}}</style></head><body data-url=/getting-started/basics/><nav id=sidebar><div id=header-wrapper><div id=header><a href=/><img alt=ogmios src=/ogmios__light.png></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1692296671></script><script type=text/javascript src=/js/auto-complete.js?1692296671></script><script type=text/javascript>var baseurl="https:\/\/ogmios.dev";</script><script type=text/javascript src=/js/search.js?1692296671></script></div><div class=highlightable><ul class=topics><li data-nav-id=/getting-started/ title="Getting started" class="dd-item
parent"><a href=/getting-started/><b>1. </b>Getting started</a><ul><li data-nav-id=/getting-started/docker/ title=Docker class=dd-item><a href=/getting-started/docker/>Docker</a></li><li data-nav-id=/getting-started/building/ title=Building class=dd-item><a href=/getting-started/building/>Building</a></li><li data-nav-id=/getting-started/testing/ title=Testing class=dd-item><a href=/getting-started/testing/>Testing</a></li><li data-nav-id=/getting-started/monitoring/ title=Monitoring class=dd-item><a href=/getting-started/monitoring/>Monitoring</a></li><li data-nav-id=/getting-started/basics/ title=Basics class="dd-item active"><a href=/getting-started/basics/>Basics</a></li></ul></li><li data-nav-id=/mini-protocols/ title=Mini-Protocols class=dd-item><a href=/mini-protocols/><b>2. </b>Mini-Protocols</a><ul><li data-nav-id=/mini-protocols/local-chain-sync/ title="Chain synchronization" class=dd-item><a href=/mini-protocols/local-chain-sync/>Chain synchronization</a></li><li data-nav-id=/mini-protocols/local-state-query/ title="Ledger state queries" class=dd-item><a href=/mini-protocols/local-state-query/>Ledger state queries</a></li><li data-nav-id=/mini-protocols/local-tx-submission/ title="Transaction submission" class=dd-item><a href=/mini-protocols/local-tx-submission/>Transaction submission</a></li><li data-nav-id=/mini-protocols/local-tx-monitor/ title="Mempool monitoring" class=dd-item><a href=/mini-protocols/local-tx-monitor/>Mempool monitoring</a></li></ul></li><li data-nav-id=/clients/ title=Clients class=dd-item><a href=/clients/><b>3. </b>Clients</a></li><li data-nav-id=/api/ title="API Reference (v6.0.*)" class=dd-item><a href=/api/><b>4. </b>API Reference (v6.0.*)</a><ul><li data-nav-id=/api/v5.6/ title="Archive (v5.6.*)" class=dd-item><a href=/api/v5.6/>Archive (v5.6.*)</a></li></ul></li><li data-nav-id=/changelog/ title=Changelog class=dd-item><a href=/changelog/><b>5. </b>Changelog</a></li><li data-nav-id=/faq/ title=F.A.Q class=dd-item><a href=/faq/><b>6. </b>F.A.Q</a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/cardanosolutions/ogmios><i class="fab fa-github"></i>Source code</a></li><li><a class=padding href=https://github.com/cardanosolutions/ogmios/issues><i class="fas fa-solid fa-bullseye"></i>Issues Tracking</a></li><li><a class=padding href=https://discord.gg/ZeyDn65t5v><i class="fab fa-discord"></i>Discord (#ogmios)</a></li><li><a class=padding href=https://github.com/CardanoSolutions/ogmios/tree/master/architectural-decisions/accepted><i class="fas fa-solid fa-file-code"></i>Architectural Decisions Record</a></li><li><a class=padding href=https://github.com/CardanoSolutions/ogmios/tree/master/server/test/vectors><i class="fas fa-solid fa-vector-square"></i>Test vectors</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/>Overview</a> > <a href=/getting-started/>Getting started</a> > Basics</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#json-rpc>JSON-RPC</a><ul><li><a href=#requests>Requests</a></li><li><a href=#responses>Responses</a></li></ul></li><li><a href=#websocket-vs-http>WebSocket vs HTTP</a><ul><li><a href=#websocket>WebSocket</a></li><li><a href=#http>HTTP</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Basics</h1><h2 id=json-rpc>JSON-RPC</h2><p>Ogmios' interface is built on top of <a href=https://www.jsonrpc.org/specification>JSON-RPC 2.0</a> which is a tiny standard to give some structure to the various messages that can be exchanged with Ogmios. The standard specifies a top-level JSON envelope by which messages must abide, as well as a semantic for some of the fields. It well suited for request/response types of protocols, such as any of the Ouroboros mini-protocols spoken by Ogmios.</p><p>We won&rsquo;t be covering the JSON-RPC standard in this guide but gives a few extra insights about how it relates to Ogmios and some good takes from it. The standard is however relatively small so we encourage you to spare 5 minutes and quickly go through it when you find an opportunity.</p><p>Each request in Ogmios yields exactly one response, might it be a <em>success</em> response or an <em>error</em> response. Furthermore, requests which relate to a particular protocol are guaranteed to yield responses in the same order.</p><h3 id=requests>Requests</h3><p>Requests messages are sent by client applications (you) to Ogmios. Requests have 3 fields of interest: <code>method</code>, <code>params</code> and <code>id</code>. The <code>method</code> identifies the request itself and translates to a corresponding message of one of the 3 Ouroboros mini-protocols. Possible values for <code>method</code> are described in <a href=../../mini-protocols>section 3 - Ouroboros mini-protocols</a> and the complete reference is available in <a href=../../api>section 4 - API Reference</a>. The <code>params</code> specify extra parameters that apply to the given <code>method</code>.</p><p>Here is an example of valid request message:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
    <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;findIntersection&#34;</span>,
    <span style=color:#f92672>&#34;params&#34;</span>: { <span style=color:#f92672>&#34;points&#34;</span>: [ <span style=color:#e6db74>&#34;origin&#34;</span> ] },
    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;init-1234-5678&#34;</span>
}
</code></pre></div><p>As you can see, the <code>method</code> specifies the method <code>findIntersection</code> which relates to the <em>chain synchronization</em> protocol. This particular request expects one argument named <code>points</code>, which contains a list of points we want to intersect with (don&rsquo;t panic, this is explained in further details in the next section!). Another interesting, albeit optional, field is the <code>id</code> field. This is completely free-form and will be spit back identically by Ogmios in the response exactly as provided. This can be useful to keep track of states on the client application or pass in extra context to each request/response. Be careful though that anything you send for a request will come back in the response; send something big, get something big.</p><h3 id=responses>Responses</h3><p>Let&rsquo;s start with a possible response to the request above:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
    <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;findIntersection&#34;</span>,
    <span style=color:#f92672>&#34;result&#34;</span>: {
      <span style=color:#f92672>&#34;intersection&#34;</span>: <span style=color:#e6db74>&#34;origin&#34;</span>,
      <span style=color:#f92672>&#34;tip&#34;</span>: {
        <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;d184f428159290bf3558b4d1d139e6a07ec6589738c28a0925a7ab776bde4d62&#34;</span>,
        <span style=color:#f92672>&#34;blockNo&#34;</span>: <span style=color:#ae81ff>4870185</span>,
        <span style=color:#f92672>&#34;slot&#34;</span>: <span style=color:#ae81ff>12176171</span>
      }
    },
    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;init-1234-5678&#34;</span>
}
</code></pre></div><p>The response kindly indicates which requests it corresponds to and has the same <code>method</code> as the matching request. It also gives a result under a specific field. Responses can have various results which are fully specified in <a href=../../api>section 4. - API Reference</a>. Also, notice the <code>id</code> field in the reponse which reflects exactly the <code>id</code> field that was set for the request.</p><div class="notices info"><p>Ogmios' responses may correspond to possible errors that are part of the Ouroboros mini-protocols. For example, if you submit an invalid transaction, you&rsquo;ll get back a success response with a result because it is a valid message in the context of the mini-protocols. Yet, Ogmios will yield an error message (with an <code>error</code> field) if you submit an invalid Ogmios message (for instance, an unknown request constructor, or something that is not a valid JSON-RPC message).</p></div><h2 id=websocket-vs-http>WebSocket vs HTTP</h2><p>Ogmios defaults transport protocol is WebSocket. Yet some mini-protocols (e.g. the transaction submission or the ledger state query) can also work over HTTP under some circumstances.</p><h3 id=websocket>WebSocket</h3><p>The WebSocket protocol is full-duplex, which means that Ogmios and clients can send messages to each other all at the same time. That is very convenient for clients who can pipeline many requests at once and process responses later on as they arrive.</p><p>Therefore, to send a message to ogmios, you only need a WebSocket client! For example, using the well-established <a href=https://www.npmjs.com/package/ws>ws</a> Node.js package and assuming a local instance of Ogmios started through Docker, you can interact with Ogmios as simply as:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>WebSocket</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;ws&#39;</span>);
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>client</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>WebSocket</span>(<span style=color:#e6db74>&#34;ws://localhost:1337&#34;</span>);

<span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>once</span>(<span style=color:#e6db74>&#39;open&#39;</span>, () =&gt; {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>request</span> <span style=color:#f92672>=</span> {
        <span style=color:#e6db74>&#34;jsonrpc&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;2.0&#34;</span>,
        <span style=color:#e6db74>&#34;method&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;findIntersection&#34;</span>,
        <span style=color:#e6db74>&#34;params&#34;</span><span style=color:#f92672>:</span> { <span style=color:#e6db74>&#34;points&#34;</span><span style=color:#f92672>:</span> [ <span style=color:#e6db74>&#34;origin&#34;</span> ] }
    };
    <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>request</span>));
});

<span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;message&#39;</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>msg</span>) {
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>msg</span>);

  <span style=color:#75715e>// do something with &#39;response&#39;
</span><span style=color:#75715e></span>});
</code></pre></div><h3 id=http>HTTP</h3><p>Some requests may also simply be sent over HTTP as <code>POST</code> requests, using the same JSON payload as data. This works well for (part of) the protocols that are stateless. For example, a one-off transaction submission is likely easier to send as an HTTP request than via an asynchronous WebSocket. Similarly, local state queries that are presented later in this user manual are likely candidate too, provided that you need not to hook on a particular point on chain. For example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>fetch</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;fetch&#39;</span>);

<span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#34;http://localhost:1337&#34;</span>, {
  <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;POST&#34;</span>,
  <span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> {
    <span style=color:#e6db74>&#34;jsonrpc&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;2.0&#34;</span>,
    <span style=color:#e6db74>&#34;method&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;submitTransaction&#34;</span>,
    <span style=color:#e6db74>&#34;params&#34;</span><span style=color:#f92672>:</span> { <span style=color:#e6db74>&#34;transaction&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;...&#34;</span> }
  }
}).<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>async</span> <span style=color:#a6e22e>response</span> =&gt; {
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>json</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>();

  <span style=color:#75715e>// do something with &#39;response&#39;
</span><span style=color:#75715e></span>});
</code></pre></div><p>That&rsquo;s all for the basics. The rest isn&rsquo;t really specific to Ogmios, but is about the Ouroboros mini-protocols themselves. See the next sections for a deep dive!</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/getting-started/monitoring/ title=Monitoring><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/mini-protocols/ title=Mini-Protocols style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1692296672></script><script src=/js/perfect-scrollbar.min.js?1692296672></script><script src=/js/perfect-scrollbar.jquery.min.js?1692296672></script><script src=/js/jquery.sticky.js?1692296672></script><script src=/js/featherlight.min.js?1692296672></script><script src=/js/highlight.pack.js?1692296672></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom-3.6.0.js?1692296672></script><script src=/js/learn.js?1692296672></script><script src=/js/hugo-learn.js?1692296672></script></body></html>