<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.76.5"><meta name=description content="User manual for Ogmios, a lightweight protocol translation service for Cardano."><meta name=author content="KtorZ <matthias.benkort@gmail.com>"><link rel=icon href=/images/favicon.png type=image/png><title>Basics - Ogmios</title><link href=/css/nucleus.css?1620152799 rel=stylesheet><link href=/css/fontawesome-all.min.css?1620152799 rel=stylesheet><link href=/css/hybrid.css?1620152799 rel=stylesheet><link href=/css/featherlight.min.css?1620152799 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1620152799 rel=stylesheet><link href=/css/auto-complete.css?1620152799 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1620152799 rel=stylesheet><link href=/css/theme.css?1620152799 rel=stylesheet><link href=/css/hugo-theme.css?1620152799 rel=stylesheet><link href=/css/theme-mine.css?1620152799 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1620152799></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/getting-started/basics/><nav id=sidebar><div id=header-wrapper><div id=header><a href=/><img alt=ogmios src=/ogmios-logo-white.png></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1620152799></script><script type=text/javascript src=/js/auto-complete.js?1620152799></script><script type=text/javascript>var baseurl="https:\/\/ogmios.dev";</script><script type=text/javascript src=/js/search.js?1620152799></script></div><div class=highlightable><ul class=topics><li data-nav-id=/getting-started/ title="Getting Started" class="dd-item
parent"><a href=/getting-started/><b>1. </b>Getting Started</a><ul><li data-nav-id=/getting-started/docker/ title=Docker class=dd-item><a href=/getting-started/docker/>Docker</a></li><li data-nav-id=/getting-started/building/ title=Building class=dd-item><a href=/getting-started/building/>Building</a></li><li data-nav-id=/getting-started/testing/ title=Testing class=dd-item><a href=/getting-started/testing/>Testing</a></li><li data-nav-id=/getting-started/monitoring/ title=Monitoring class=dd-item><a href=/getting-started/monitoring/>Monitoring</a></li><li data-nav-id=/getting-started/basics/ title=Basics class="dd-item active"><a href=/getting-started/basics/>Basics</a></li></ul></li><li data-nav-id=/mini-protocols/ title="Ouroboros Mini-Protocols" class=dd-item><a href=/mini-protocols/><b>2. </b>Ouroboros Mini-Protocols</a><ul><li data-nav-id=/mini-protocols/local-chain-sync/ title="Local Chain Sync" class=dd-item><a href=/mini-protocols/local-chain-sync/>Local Chain Sync</a></li><li data-nav-id=/mini-protocols/local-tx-submission/ title="Local Tx Submission" class=dd-item><a href=/mini-protocols/local-tx-submission/>Local Tx Submission</a></li><li data-nav-id=/mini-protocols/local-state-query/ title="Local State Query" class=dd-item><a href=/mini-protocols/local-state-query/>Local State Query</a></li></ul></li><li data-nav-id=/deployment/ title=Deployment class=dd-item><a href=/deployment/><b>3. </b>Deployment</a><ul><li data-nav-id=/deployment/aws/ title=AWS class=dd-item><a href=/deployment/aws/>AWS</a></li></ul></li><li data-nav-id=/api-reference/ title="API Reference" class=dd-item><a href=/api-reference/><b>4. </b>API Reference</a></li><li data-nav-id=/changelog/ title=Changelog class=dd-item><a href=/changelog/><b>5. </b>Changelog</a></li><li data-nav-id=/faq/ title=F.A.Q class=dd-item><a href=/faq/><b>6. </b>F.A.Q</a></li></ul><section id=footer><center><a href=https://github.com/KtorZ/cardano-ogmios><i class="fab fa-github" style=font-size:3em></i></a></center></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/>Overview</a> > <a href=/getting-started/>Getting Started</a> > Basics</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#json-wsp>JSON-WSP</a><ul><li><a href=#requests>Requests</a></li><li><a href=#responses>Responses</a></li></ul></li><li><a href=#websocket>WebSocket</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Basics</h1><h2 id=json-wsp>JSON-WSP</h2><p>Ogmios' interface is built on top of <a href=https://en.wikipedia.org/wiki/JSON-WSP>JSON-WSP</a> which is a tiny standard to give some structure to the various messages that can be exchanged with Ogmios. The standard specifies a top-level JSON envelope by which messages must abide, as well as a semantic for some of the fields. In particular, there are 4 types of messages possible in JSON-WSP:</p><ul><li>descriptions</li><li>requests</li><li>responses</li><li>faults (which are a special kind of responses).</li></ul><p>We won&rsquo;t be covering the JSON-WSP standard in this guide but gives a few extra insights about how it relates to Ogmios and some good takes from it. Each request in Ogmios yields exactly one response, might it be a <em>normal</em> response or a fault. Furthermore, requests which relate to a particular protocol are guaranteed to yield responses in the same order.</p><h3 id=requests>Requests</h3><p>Requests messages are sent by client applications (you) to Ogmios. Requests have 3 fields of interest: <code>methodname</code>, <code>args</code> and <code>mirror</code>. The <code>methodname</code> identifies the request itself and translates to a corresponding message of one of the 3 Ouroboros mini-protocols. Possible values for the <code>methodname</code> are described in <a href=../../mini-protocols>section 3 - Ouroboros mini-protocols</a> and the complete reference is available in <a href=../../api-reference>section 4 - API Reference</a>.</p><p>Here is an example of valid request message:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{ 
    <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;jsonwsp/request&#34;</span>,
    <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;1.0&#34;</span>,
    <span style=color:#f92672>&#34;servicename&#34;</span>: <span style=color:#e6db74>&#34;ogmios&#34;</span>,
    <span style=color:#f92672>&#34;methodname&#34;</span>: <span style=color:#e6db74>&#34;FindIntersect&#34;</span>,
    <span style=color:#f92672>&#34;args&#34;</span>: { <span style=color:#f92672>&#34;points&#34;</span>: [ <span style=color:#e6db74>&#34;origin&#34;</span> ] },
    <span style=color:#f92672>&#34;mirror&#34;</span>: { <span style=color:#f92672>&#34;step&#34;</span>: <span style=color:#e6db74>&#34;INIT&#34;</span> }
}
</code></pre></div><p>As you can see, the <code>methodname</code> specifies the method <code>FindIntersect</code> which relates to the <em>local chain-sync</em> Ouroboros mini-protocol. This particular request expects one argument named <code>points</code>, which contains a list of points we want to intersect with (don&rsquo;t panic, this is explained in further details in the next section!). Another interesting, albeit optional, field is the <code>mirror</code> field. This is completely free-form and will be spit back identically by Ogmios in the response. This can be useful to keep track of states on the client application or pass in extra context to each request/response. Be careful though that anything you send for a request will come back in the response; send something big, get something big.</p><h3 id=responses>Responses</h3><p>Let&rsquo;s start with a possible response to the request above:</p><pre><code>{
    &quot;type&quot;: &quot;jsonwsp/response&quot;,
    &quot;version&quot;: &quot;1.0&quot;,
    &quot;servicename&quot;: &quot;ogmios&quot;,
    &quot;methodname&quot;: &quot;FindIntersect&quot;,
    &quot;result&quot;: {
        &quot;IntersectionFound&quot;: {
            &quot;point&quot;: &quot;origin&quot;,
            &quot;tip&quot;: {
              &quot;hash&quot;: &quot;d184f428159290bf3558b4d1d139e6a07ec6589738c28a0925a7ab776bde4d62&quot;,
              &quot;blockNo&quot;: 4870185,
              &quot;slot&quot;: 12176171
            }
        }
    },
    &quot;reflection&quot;: { &quot;step&quot;: &quot;INIT&quot; }
}
</code></pre><p>The response kindly indicates which requests it corresponds to and has the same <code>methodname</code> as the matching request. It also gives a result under a specific field. Responses can have various results which are fully specified in <a href=../../api-reference>section 4. - API Reference</a>. Also, notice the <code>reflection</code> field which reflects exactly the <code>mirror</code> field that was set for the request.</p><div class="notices info"><p>Ogmios' responses may correspond to possible errors that are part of the Ouroboros mini-protocols. For example, if you submit an invalid transaction, you&rsquo;ll get back a message of type <code>jsonwsp/response</code> because it is a valid message in the context of the mini-protocols. Yet, Ogmios will yield a message of type <code>jsonwsp/fault</code> if you submit an invalid Ogmios message (for instance, an unknown request constructor, or something that is not a valid JSON-WSP message).</p></div><h2 id=websocket>WebSocket</h2><p>Ogmios uses WebSocket as a communication protocol. The WebSocket protocol is full-duplex, which means that Ogmios and clients can send messages to each other all at the same time. That is very convenient for clients who can pipeline many requests at once and process responses later on as they arrive.</p><p>Therefore, to send a message to ogmios, you only need a WebSocket client! For example, using the well-established <a href=https://www.npmjs.com/package/ws>ws</a> Node.js package and assuming a local instance of Ogmios started through Docker, you can interact with Ogmios as simply as:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>WebSocket</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;ws&#39;</span>);
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>client</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>WebSocket</span>(<span style=color:#e6db74>&#34;ws://localhost:1337&#34;</span>);

<span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>once</span>(<span style=color:#e6db74>&#39;open&#39;</span>, () =&gt; {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>request</span> <span style=color:#f92672>=</span> { 
        <span style=color:#e6db74>&#34;type&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;jsonwsp/request&#34;</span>,
        <span style=color:#e6db74>&#34;version&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;1.0&#34;</span>,
        <span style=color:#e6db74>&#34;servicename&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;ogmios&#34;</span>,
        <span style=color:#e6db74>&#34;methodname&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;FindIntersect&#34;</span>,
        <span style=color:#e6db74>&#34;args&#34;</span><span style=color:#f92672>:</span> { <span style=color:#e6db74>&#34;points&#34;</span><span style=color:#f92672>:</span> [ <span style=color:#e6db74>&#34;origin&#34;</span> ] }
    };
    <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>request</span>));
});

<span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;message&#39;</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>msg</span>) {
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>msg</span>);

  <span style=color:#75715e>// do something with &#39;response&#39;
</span><span style=color:#75715e></span>});
</code></pre></div><p>That&rsquo;s all for the basics. The rest isn&rsquo;t really specific to Ogmios, but is about the Ouroboros mini-protocols themselves. See the next sections for a deep dive!</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/getting-started/monitoring/ title=Monitoring><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/mini-protocols/ title="Ouroboros Mini-Protocols" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1620152799></script><script src=/js/perfect-scrollbar.min.js?1620152799></script><script src=/js/perfect-scrollbar.jquery.min.js?1620152799></script><script src=/js/jquery.sticky.js?1620152799></script><script src=/js/featherlight.min.js?1620152799></script><script src=/js/highlight.pack.js?1620152799></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom-3.6.0.js?1620152799></script><script src=/js/learn.js?1620152799></script><script src=/js/hugo-learn.js?1620152799></script></body></html>