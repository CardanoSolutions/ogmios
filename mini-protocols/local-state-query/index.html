<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.76.5"><meta name=description content="User manual for Ogmios, a lightweight protocol translation service for Cardano."><meta name=author content="KtorZ <matthias.benkort@gmail.com>"><link rel=icon href=/images/favicon.png type=image/png><title>Ledger state queries - Ogmios</title><link href=/css/nucleus.css?1693337039 rel=stylesheet><link href=/css/fontawesome-all.min.css?1693337039 rel=stylesheet><link href=/css/hybrid.css?1693337039 rel=stylesheet><link href=/css/featherlight.min.css?1693337039 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1693337039 rel=stylesheet><link href=/css/auto-complete.css?1693337039 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1693337039 rel=stylesheet><link href=/css/theme.css?1693337039 rel=stylesheet><link href=/css/tabs.css?1693337039 rel=stylesheet><link href=/css/hugo-theme.css?1693337039 rel=stylesheet><link href=/css/theme-mine.css?1693337039 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1693337039></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><style type=text/css>table.users{text-align:center;table-layout:fixed;border:none;border-collapse:collapse}table.users td{padding:0;border:none}table.users img{max-width:100px;max-height:100px;margin:1rem auto!important;border-radius:50%}@media(max-width:1200px){table.users img{max-width:70px;max-height:70px;margin:.75rem auto!important}table.users tr:nth-child(2n){display:none}}@media(max-width:900px){table.users img{max-width:60px;max-height:60px;margin:.5rem auto!important}}@media(max-width:500px){table.users img{max-width:40px;max-height:40px;margin:.5rem .25rem}}</style></head><body data-url=/mini-protocols/local-state-query/><nav id=sidebar><div id=header-wrapper><div id=header><a href=/><img alt=ogmios src=/ogmios__light.png></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1693337039></script><script type=text/javascript src=/js/auto-complete.js?1693337039></script><script type=text/javascript>var baseurl="https:\/\/ogmios.dev";</script><script type=text/javascript src=/js/search.js?1693337039></script></div><div class=highlightable><ul class=topics><li data-nav-id=/getting-started/ title="Getting started" class=dd-item><a href=/getting-started/><b>1. </b>Getting started</a><ul><li data-nav-id=/getting-started/docker/ title=Docker class=dd-item><a href=/getting-started/docker/>Docker</a></li><li data-nav-id=/getting-started/building/ title=Building class=dd-item><a href=/getting-started/building/>Building</a></li><li data-nav-id=/getting-started/testing/ title=Testing class=dd-item><a href=/getting-started/testing/>Testing</a></li><li data-nav-id=/getting-started/monitoring/ title=Monitoring class=dd-item><a href=/getting-started/monitoring/>Monitoring</a></li><li data-nav-id=/getting-started/basics/ title=Basics class=dd-item><a href=/getting-started/basics/>Basics</a></li></ul></li><li data-nav-id=/mini-protocols/ title=Mini-Protocols class="dd-item
parent"><a href=/mini-protocols/><b>2. </b>Mini-Protocols</a><ul><li data-nav-id=/mini-protocols/local-chain-sync/ title="Chain synchronization" class=dd-item><a href=/mini-protocols/local-chain-sync/>Chain synchronization</a></li><li data-nav-id=/mini-protocols/local-state-query/ title="Ledger state queries" class="dd-item active"><a href=/mini-protocols/local-state-query/>Ledger state queries</a></li><li data-nav-id=/mini-protocols/local-tx-submission/ title="Transaction submission" class=dd-item><a href=/mini-protocols/local-tx-submission/>Transaction submission</a></li><li data-nav-id=/mini-protocols/local-tx-monitor/ title="Mempool monitoring" class=dd-item><a href=/mini-protocols/local-tx-monitor/>Mempool monitoring</a></li></ul></li><li data-nav-id=/clients/ title=Clients class=dd-item><a href=/clients/><b>3. </b>Clients</a></li><li data-nav-id=/api/ title="API Reference (v6.0.*)" class=dd-item><a href=/api/><b>4. </b>API Reference (v6.0.*)</a><ul><li data-nav-id=/api/v5.6/ title="Archive (v5.6.*)" class=dd-item><a href=/api/v5.6/>Archive (v5.6.*)</a></li></ul></li><li data-nav-id=/changelog/ title=Changelog class=dd-item><a href=/changelog/><b>5. </b>Changelog</a></li><li data-nav-id=/faq/ title=F.A.Q class=dd-item><a href=/faq/><b>6. </b>F.A.Q</a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/cardanosolutions/ogmios><i class="fab fa-github"></i>Source code</a></li><li><a class=padding href=https://github.com/cardanosolutions/ogmios/issues><i class="fas fa-solid fa-bullseye"></i>Issues Tracking</a></li><li><a class=padding href=https://discord.gg/ZeyDn65t5v><i class="fab fa-discord"></i>Discord (#ogmios)</a></li><li><a class=padding href=https://github.com/CardanoSolutions/ogmios/tree/master/architectural-decisions/accepted><i class="fas fa-solid fa-file-code"></i>Architectural Decisions Record</a></li><li><a class=padding href=https://github.com/CardanoSolutions/ogmios/tree/master/server/test/vectors><i class="fas fa-solid fa-vector-square"></i>Test vectors</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/>Overview</a> > <a href=/mini-protocols/>Mini-Protocols</a> > Ledger state queries</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#how-to-use>How to use</a></li><li><a href=#acquiring-a-state>Acquiring a state</a></li><li><a href=#querying>Querying</a><ul><li></li></ul></li><li><a href=#simplified-example>Simplified example</a></li><li><a href=#full-example>Full example</a></li><li><a href=#example-queries>Example queries</a><ul><li><a href=#network-1>Network</a></li><li><a href=#ledger-state-1>Ledger-state</a></li></ul></li><li><a href=#errors>Errors</a></li><li><a href=#api-reference>API Reference</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Ledger state queries</h1><div class="ascii-drawing ascii-drawing-split"><pre style=font-family:monospace> 
                                   queryLedgerState/*
                         START     queryNetwork/*
                           ⇓      ╭────╮
releaseLedgerState ┌──────────────┴┐   │
            ╭─────▶│     Idle      │◀──╯
            │      └───────┬───────┘
            │              │
            │              │ acquireLedgerState
            │              │
            │              │   (re)acquireLedgerState
            │              ▼  ╭────────╮
            │      ┌──────────┴────┐   │
            ╰──────┤   Acquired    │◀──╯
                   └───┬───────────┘
                       │       ▲
    queryLedgerState/* │       │
        queryNetwork/* │       │
                       ╰───────╯
 </pre></div><h2 id=overview>Overview</h2><p>The state query protocol is likely the most versatile of the three Ouroboros mini-protocols. As a matter of fact, it allows for querying various types of information directly from the ledger. In essence, it is like a very simpler request/response pattern where the types of questions one can ask are specified by the protocols. Those questions include: information about the chain tip, information about stake pools but also the balance of a particular address.</p><p>In order to run a question by the ledger, one must first acquire a particular position on the chain, so that the node can reliably answer a few questions on a chosen, frozen state while continuing maintaining more recent version of the ledger on the side. It is important to note that:</p><ol><li><p>The node cannot acquire any arbitrary state. One can only rewind up to a certain point.</p></li><li><p>Should a client keep a state acquired for too long, it is likely to become unreachable at some point, forcing clients to re-acquire.</p></li></ol><h2 id=how-to-use>How to use</h2><p>Ogmios uses a simplified version of the above state-machine. Or more exactly, it exposes a simplified version and handles some of the complexity behind the scene for you. As clients, Ogmios will give you method to acquire a state, query that state and release the state. A typical sequence would be to start by acquiring a state on a given point and then make a few queries, and then release. The release step is optional although it is a bit more polite to say goodbye at the end of a conversation.</p><p>It is also possible to submit queries directly without acquiring. As a consequence, Ogmios will acquire the tip of the chain, run the query and release it for you. This is the easiest way to send queries if you don&rsquo;t care about capturing a particular state. Note however that this may create race conditions if you send multiple queries via this method. Indeed, the tip is changing quite often on the network, and two subsequent queries may actually run on two different points of the chain. While this is generally safe for most queries, it may also put your application in an unexpected state when crossing epoch boundaries or hard-forks.</p><h2 id=acquiring-a-state>Acquiring a state</h2><p>The <code>acquireLedgerState</code> method expects one argument named <code>point</code>. The point has the same format as points in the <a href=../local-chain-sync>chain synchronization protocol</a>. That is, they can be block header hashes or the special keyword <code>"origin"</code> (though there&rsquo;s very little chance that one will be able to acquire the origin!).</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
    <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;acquireLedgerState&#34;</span>,
    <span style=color:#f92672>&#34;params&#34;</span>: {
        <span style=color:#f92672>&#34;point&#34;</span>: {
            <span style=color:#f92672>&#34;slot&#34;</span>: <span style=color:#ae81ff>1234</span>,
            <span style=color:#f92672>&#34;hash&#34;</span>: <span style=color:#e6db74>&#34;9e871633f7aa356ef11cdcabb6fdd6d8f4b00bc919c57aed71a91af8f86df590&#34;</span>
        }
    }
}
</code></pre></div><p>One thing that doesn&rsquo;t strike as obvious is that, as clients, you need points to query any information. There are many ways to get those hashes but in the context of Ogmios, the most logical way is via the <a href=../local-chain-sync/>chain synchronization</a> protocol.</p><div class="notices tip"><p>You can acquire multiple times, the last one will prevail. If you need to re-acquire, simply send another <code>acquire</code> request.</p></div><div class="notices warning"><p>You can skip acquiring a state should you want to run a query on the current state of the chain. This is good for one-off queries, but if you need to chain multiple queries together it is <strong>highly recommended</strong> to acquire a state first to preserve data-consistency between queries!</p></div><h2 id=querying>Querying</h2><p>There are many queries that can be sent to the ledger, and the list is growing days after days as the Cardano team implements new ones. With Ogmios, all queries follow the same pattern and are identified by a method. There exists two types of queries: ledger-state queries and network queries. The former is performed on the ledger state and are era-dependent. The latter are always available (even when the node is synchronizing) and are era-independent. In both cases, queries are constructed in a similar fashion:</p><ul><li><code>queryLedgerState/*</code>, where <code>*</code> has to be replaced with an actual ledger-state query name (see below);</li><li><code>queryNetwork/*</code>, where <code>*</code> has to be replaced with an actual network query name (see below)</li></ul><p>For example, to query the ongoing epoch of the ledger:</p><pre><code>{
    &quot;jsonrpc&quot;: &quot;2.0&quot;,
    &quot;method&quot;: &quot;queryLedgerState/epoch&quot;,
}
</code></pre><h4 id=network>Network</h4><p>At the moment of writing this guide, the following queries are available:</p><table><thead><tr><th>queryNetwork</th><th>Information</th></tr></thead><tbody><tr><td><code>blockHeight</code></td><td>The chain&rsquo;s highest block number.</td></tr><tr><td><code>genesisConfiguration</code></td><td>Get the genesis configuration of a specific era.</td></tr><tr><td><code>startTime</code></td><td>The chain&rsquo;s start time (UTC).</td></tr><tr><td><code>tip</code></td><td>The network&rsquo;s current tip.</td></tr></tbody></table><h4 id=ledger-state>Ledger-state</h4><table><thead><tr><th>queryLedgerState</th><th>Information</th></tr></thead><tbody><tr><td><code>epoch</code></td><td>The current epoch of the ledger.</td></tr><tr><td><code>eraStart</code></td><td>The information regarding the beginning of the current ledger era.</td></tr><tr><td><code>eraSummaries</code></td><td>Era bounds and slot parameters details, required for proper slotting arithmetic.</td></tr><tr><td><code>liveStakeDistribution</code></td><td>Distribution of the stake across all known stake pools, relative to the <strong>total</strong> stake in the network.</td></tr><tr><td><code>projectedRewards</code></td><td>The projected rewards of an account in a context where the top stake pools are fully saturated. This projection gives, in principle, a ranking of stake pools that maximizes delegator rewards.</td></tr><tr><td><code>protocolParameters</code></td><td>The current protocol parameters.</td></tr><tr><td><code>proposedProtocolParameters</code></td><td>The last update proposal w.r.t. protocol parameters, if any.</td></tr><tr><td><code>rewardAccountSummaries</code></td><td>Current delegation settings and rewards of chosen reward accounts.</td></tr><tr><td><code>rewardsProvenance</code></td><td>Get details about rewards calculation for the ongoing epoch.</td></tr><tr><td><code>stakePools</code></td><td>The list of all currently registered and active stake pools with their current parameters.</td></tr><tr><td><code>tip</code></td><td>The current tip the ledger is at. Said differently, the slot number and header hash of the last block that has been processed by the ledger.</td></tr><tr><td><code>utxo</code></td><td>Current UTXO, possibly filtered by output reference.</td></tr></tbody></table><div class="notices tip"><p>To know more about arguments and results of each query, have a look at the <a href=../../api>API reference</a>.</p></div><h2 id=simplified-example>Simplified example</h2><p>In this example, we&rsquo;ll consider a simple direct query on the network tip to fetch the latest protocol parameters. The next section gives a more elaborate example which shows how to acquire a specific point on chain.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>WebSocket</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;ws&#39;</span>);
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>client</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>WebSocket</span>(<span style=color:#e6db74>&#34;ws://localhost:1337&#34;</span>);

<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>rpc</span>(<span style=color:#a6e22e>method</span>, <span style=color:#a6e22e>params</span> <span style=color:#f92672>=</span> {}, <span style=color:#a6e22e>id</span>) {
    <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>({
        <span style=color:#a6e22e>jsonrpc</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;2.0&#34;</span>,
        <span style=color:#a6e22e>method</span>,
        <span style=color:#a6e22e>params</span>,
        <span style=color:#a6e22e>id</span>
    }));
}

<span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>once</span>(<span style=color:#e6db74>&#39;open&#39;</span>, () =&gt; {
    <span style=color:#a6e22e>rpc</span>(<span style=color:#e6db74>&#34;queryLedgerState/protocolParameters&#34;</span>);
});

<span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;message&#39;</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>msg</span>) {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>msg</span>);
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>protocolParameters</span>, <span style=color:#66d9ef>null</span>, <span style=color:#ae81ff>4</span>));
    <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>close</span>();
});
</code></pre></div><p>This little excerpt outputs the most recent protocol parameters in a nice JSON:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;minFeeCoefficient&#34;</span>: <span style=color:#ae81ff>44</span>,
  <span style=color:#f92672>&#34;minFeeConstant&#34;</span>: { <span style=color:#f92672>&#34;lovelace&#34;</span>: <span style=color:#ae81ff>155381</span> },
  <span style=color:#f92672>&#34;maxBlockBodySize&#34;</span>: { <span style=color:#f92672>&#34;bytes&#34;</span>: <span style=color:#ae81ff>90112</span> },
  <span style=color:#f92672>&#34;maxBlockHeaderSize&#34;</span>: { <span style=color:#f92672>&#34;bytes&#34;</span>: <span style=color:#ae81ff>1100</span> },
  <span style=color:#f92672>&#34;maxTransactionSize&#34;</span>: { <span style=color:#f92672>&#34;bytes&#34;</span>: <span style=color:#ae81ff>16384</span> },
  <span style=color:#f92672>&#34;stakeCredentialDeposit&#34;</span>: { <span style=color:#f92672>&#34;lovelace&#34;</span>: <span style=color:#ae81ff>2000000</span> },
  <span style=color:#f92672>&#34;stakePoolDeposit&#34;</span>: { <span style=color:#f92672>&#34;lovelace&#34;</span>: <span style=color:#ae81ff>500000000</span> },
  <span style=color:#f92672>&#34;stakePoolRetirementEpochBound&#34;</span>: <span style=color:#ae81ff>18</span>,
  <span style=color:#f92672>&#34;desiredNumberOfStakePools&#34;</span>: <span style=color:#ae81ff>500</span>,
  <span style=color:#f92672>&#34;stakePoolPledgeInfluence&#34;</span>: <span style=color:#e6db74>&#34;3/10&#34;</span>,
  <span style=color:#f92672>&#34;monetaryExpansion&#34;</span>: <span style=color:#e6db74>&#34;3/1000&#34;</span>,
  <span style=color:#f92672>&#34;treasuryExpansion&#34;</span>: <span style=color:#e6db74>&#34;1/5&#34;</span>,
  <span style=color:#f92672>&#34;minStakePoolCost&#34;</span>: { <span style=color:#f92672>&#34;lovelace&#34;</span>: <span style=color:#ae81ff>340000000</span> },
  <span style=color:#f92672>&#34;minUtxoDepositConstant&#34;</span>: <span style=color:#ae81ff>0</span>,
  <span style=color:#f92672>&#34;minUtxoDepositCoefficient&#34;</span>: <span style=color:#ae81ff>4310</span>,
  <span style=color:#f92672>&#34;plutusCostModels&#34;</span>: {
    <span style=color:#f92672>&#34;plutus:v1&#34;</span>: [
      <span style=color:#ae81ff>205665</span>,    <span style=color:#ae81ff>812</span>,      <span style=color:#ae81ff>1</span>,      <span style=color:#ae81ff>1</span>,   <span style=color:#ae81ff>1000</span>,    <span style=color:#ae81ff>571</span>,      <span style=color:#ae81ff>0</span>,       <span style=color:#ae81ff>1</span>,
        <span style=color:#ae81ff>1000</span>,  <span style=color:#ae81ff>24177</span>,      <span style=color:#ae81ff>4</span>,      <span style=color:#ae81ff>1</span>,   <span style=color:#ae81ff>1000</span>,     <span style=color:#ae81ff>32</span>, <span style=color:#ae81ff>117366</span>,   <span style=color:#ae81ff>10475</span>,
           <span style=color:#ae81ff>4</span>,  <span style=color:#ae81ff>23000</span>,    <span style=color:#ae81ff>100</span>,  <span style=color:#ae81ff>23000</span>,    <span style=color:#ae81ff>100</span>,  <span style=color:#ae81ff>23000</span>,    <span style=color:#ae81ff>100</span>,   <span style=color:#ae81ff>23000</span>,
         <span style=color:#ae81ff>100</span>,  <span style=color:#ae81ff>23000</span>,    <span style=color:#ae81ff>100</span>,  <span style=color:#ae81ff>23000</span>,    <span style=color:#ae81ff>100</span>,    <span style=color:#ae81ff>100</span>,    <span style=color:#ae81ff>100</span>,   <span style=color:#ae81ff>23000</span>,
         <span style=color:#ae81ff>100</span>,  <span style=color:#ae81ff>19537</span>,     <span style=color:#ae81ff>32</span>, <span style=color:#ae81ff>175354</span>,     <span style=color:#ae81ff>32</span>,  <span style=color:#ae81ff>46417</span>,      <span style=color:#ae81ff>4</span>,  <span style=color:#ae81ff>221973</span>,
         <span style=color:#ae81ff>511</span>,      <span style=color:#ae81ff>0</span>,      <span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>89141</span>,     <span style=color:#ae81ff>32</span>, <span style=color:#ae81ff>497525</span>,  <span style=color:#ae81ff>14068</span>,       <span style=color:#ae81ff>4</span>,
           <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>196500</span>, <span style=color:#ae81ff>453240</span>,    <span style=color:#ae81ff>220</span>,      <span style=color:#ae81ff>0</span>,      <span style=color:#ae81ff>1</span>,      <span style=color:#ae81ff>1</span>,    <span style=color:#ae81ff>1000</span>,
       <span style=color:#ae81ff>28662</span>,      <span style=color:#ae81ff>4</span>,      <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>245000</span>, <span style=color:#ae81ff>216773</span>,     <span style=color:#ae81ff>62</span>,      <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1060367</span>,
       <span style=color:#ae81ff>12586</span>,      <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>208512</span>,    <span style=color:#ae81ff>421</span>,      <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>187000</span>,   <span style=color:#ae81ff>1000</span>,   <span style=color:#ae81ff>52998</span>,
           <span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>80436</span>,     <span style=color:#ae81ff>32</span>,  <span style=color:#ae81ff>43249</span>,     <span style=color:#ae81ff>32</span>,   <span style=color:#ae81ff>1000</span>,     <span style=color:#ae81ff>32</span>,   <span style=color:#ae81ff>80556</span>,
           <span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>57667</span>,      <span style=color:#ae81ff>4</span>,   <span style=color:#ae81ff>1000</span>,     <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>197145</span>,    <span style=color:#ae81ff>156</span>,       <span style=color:#ae81ff>1</span>,
      <span style=color:#ae81ff>197145</span>,    <span style=color:#ae81ff>156</span>,      <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>204924</span>,    <span style=color:#ae81ff>473</span>,      <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>208896</span>,     <span style=color:#ae81ff>511</span>,
           <span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>52467</span>,     <span style=color:#ae81ff>32</span>,  <span style=color:#ae81ff>64832</span>
    ],
    <span style=color:#f92672>&#34;plutus:v2&#34;</span>: [
      <span style=color:#ae81ff>205665</span>,    <span style=color:#ae81ff>812</span>,      <span style=color:#ae81ff>1</span>,      <span style=color:#ae81ff>1</span>,   <span style=color:#ae81ff>1000</span>,    <span style=color:#ae81ff>571</span>,      <span style=color:#ae81ff>0</span>,       <span style=color:#ae81ff>1</span>,
        <span style=color:#ae81ff>1000</span>,  <span style=color:#ae81ff>24177</span>,      <span style=color:#ae81ff>4</span>,      <span style=color:#ae81ff>1</span>,   <span style=color:#ae81ff>1000</span>,     <span style=color:#ae81ff>32</span>, <span style=color:#ae81ff>117366</span>,   <span style=color:#ae81ff>10475</span>,
           <span style=color:#ae81ff>4</span>,  <span style=color:#ae81ff>23000</span>,    <span style=color:#ae81ff>100</span>,  <span style=color:#ae81ff>23000</span>,    <span style=color:#ae81ff>100</span>,  <span style=color:#ae81ff>23000</span>,    <span style=color:#ae81ff>100</span>,   <span style=color:#ae81ff>23000</span>,
         <span style=color:#ae81ff>100</span>,  <span style=color:#ae81ff>23000</span>,    <span style=color:#ae81ff>100</span>,  <span style=color:#ae81ff>23000</span>,    <span style=color:#ae81ff>100</span>,    <span style=color:#ae81ff>100</span>,    <span style=color:#ae81ff>100</span>,   <span style=color:#ae81ff>23000</span>,
         <span style=color:#ae81ff>100</span>,  <span style=color:#ae81ff>19537</span>,     <span style=color:#ae81ff>32</span>, <span style=color:#ae81ff>175354</span>,     <span style=color:#ae81ff>32</span>,  <span style=color:#ae81ff>46417</span>,      <span style=color:#ae81ff>4</span>,  <span style=color:#ae81ff>221973</span>,
         <span style=color:#ae81ff>511</span>,      <span style=color:#ae81ff>0</span>,      <span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>89141</span>,     <span style=color:#ae81ff>32</span>, <span style=color:#ae81ff>497525</span>,  <span style=color:#ae81ff>14068</span>,       <span style=color:#ae81ff>4</span>,
           <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>196500</span>, <span style=color:#ae81ff>453240</span>,    <span style=color:#ae81ff>220</span>,      <span style=color:#ae81ff>0</span>,      <span style=color:#ae81ff>1</span>,      <span style=color:#ae81ff>1</span>,    <span style=color:#ae81ff>1000</span>,
       <span style=color:#ae81ff>28662</span>,      <span style=color:#ae81ff>4</span>,      <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>245000</span>, <span style=color:#ae81ff>216773</span>,     <span style=color:#ae81ff>62</span>,      <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1060367</span>,
       <span style=color:#ae81ff>12586</span>,      <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>208512</span>,    <span style=color:#ae81ff>421</span>,      <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>187000</span>,   <span style=color:#ae81ff>1000</span>,   <span style=color:#ae81ff>52998</span>,
           <span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>80436</span>,     <span style=color:#ae81ff>32</span>,  <span style=color:#ae81ff>43249</span>,     <span style=color:#ae81ff>32</span>,   <span style=color:#ae81ff>1000</span>,     <span style=color:#ae81ff>32</span>,   <span style=color:#ae81ff>80556</span>,
           <span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>57667</span>,      <span style=color:#ae81ff>4</span>,   <span style=color:#ae81ff>1000</span>,     <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>197145</span>,    <span style=color:#ae81ff>156</span>,       <span style=color:#ae81ff>1</span>,
      <span style=color:#ae81ff>197145</span>,    <span style=color:#ae81ff>156</span>,      <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>204924</span>,    <span style=color:#ae81ff>473</span>,      <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>208896</span>,     <span style=color:#ae81ff>511</span>,
           <span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>52467</span>,     <span style=color:#ae81ff>32</span>,  <span style=color:#ae81ff>64832</span>
    ]
  },
  <span style=color:#f92672>&#34;scriptExecutionPrices&#34;</span>: {
    <span style=color:#f92672>&#34;memory&#34;</span>: <span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#ae81ff>577</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#ae81ff>10000</span><span style=color:#960050;background-color:#1e0010>&#39;</span>,
    <span style=color:#f92672>&#34;cpu&#34;</span>: <span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#ae81ff>721</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#ae81ff>10000000</span><span style=color:#960050;background-color:#1e0010>&#39;</span>
  },
  <span style=color:#f92672>&#34;maxExecutionUnitsPerTransaction&#34;</span>: {
    <span style=color:#f92672>&#34;memory&#34;</span>: <span style=color:#ae81ff>14000000</span>,
    <span style=color:#f92672>&#34;cpu&#34;</span>: <span style=color:#ae81ff>10000000000</span>
  },
  <span style=color:#f92672>&#34;maxExecutionUnitsPerBlock&#34;</span>: {
    <span style=color:#f92672>&#34;memory&#34;</span>: <span style=color:#ae81ff>62000000</span>,
    <span style=color:#f92672>&#34;cpu&#34;</span>: <span style=color:#ae81ff>20000000000</span>
  },
  <span style=color:#f92672>&#34;maxValueSize&#34;</span>: { <span style=color:#f92672>&#34;bytes&#34;</span>: <span style=color:#ae81ff>5000</span> },
  <span style=color:#f92672>&#34;collateralPercentage&#34;</span>: <span style=color:#ae81ff>150</span>,
  <span style=color:#f92672>&#34;maxCollateralInputs&#34;</span>: <span style=color:#ae81ff>3</span>,
  <span style=color:#f92672>&#34;version&#34;</span>: {
    <span style=color:#f92672>&#34;major&#34;</span>: <span style=color:#ae81ff>8</span>,
    <span style=color:#f92672>&#34;minor&#34;</span>: <span style=color:#ae81ff>0</span>
  }
}
</code></pre></div><h2 id=full-example>Full example</h2><p>Let&rsquo;s see a full example getting the stake distribution of all stake pools of the Cardano mainnet. In the example, we&rsquo;ll also use a network query to find the current chain tip, and then try to acquire it for subsequent queries.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>WebSocket</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;ws&#39;</span>);
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>client</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>WebSocket</span>(<span style=color:#e6db74>&#34;ws://localhost:1337&#34;</span>);

<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>rpc</span>(<span style=color:#a6e22e>method</span>, <span style=color:#a6e22e>params</span> <span style=color:#f92672>=</span> {}, <span style=color:#a6e22e>id</span>) {
    <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>({
        <span style=color:#a6e22e>jsonrpc</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;2.0&#34;</span>,
        <span style=color:#a6e22e>method</span>,
        <span style=color:#a6e22e>params</span>,
        <span style=color:#a6e22e>id</span>
    }));
}

<span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>once</span>(<span style=color:#e6db74>&#39;open&#39;</span>, () =&gt; {
    <span style=color:#a6e22e>rpc</span>(<span style=color:#e6db74>&#34;queryNetwork/tip&#34;</span>, {})
});

<span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;message&#39;</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>msg</span>) {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>msg</span>);

    <span style=color:#66d9ef>switch</span> (<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>method</span>) {
        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;queryNetwork/tip&#34;</span><span style=color:#f92672>:</span>
            <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>point</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>tip</span>;
            <span style=color:#a6e22e>rpc</span>(<span style=color:#e6db74>&#34;acquireLedgerState&#34;</span>, { <span style=color:#a6e22e>point</span> });
            <span style=color:#66d9ef>break</span>;

        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;acquireLedgerState&#34;</span><span style=color:#f92672>:</span>
            <span style=color:#a6e22e>rpc</span>(<span style=color:#e6db74>&#34;queryLedgerState/liveStakeDistribution&#34;</span>);
            <span style=color:#66d9ef>break</span>;

        <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span>
            <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>liveStakeDistribution</span>);
            <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>close</span>();
            <span style=color:#66d9ef>break</span>;
    }
});
</code></pre></div><p>Here&rsquo;s a walk-though describing what happens when running the above script:</p><ol><li><p>An initial request ask the network tip. That is guaranteed to succeed and is a little trick in order to access the ledger tip easily. As a response, Ogmios replies with:</p><div class=expand><div class=expand-label style=cursor:pointer onclick="$h=$(this);$h.next('div').slideToggle(100,function(){$h.children('i').attr('class',function(){return $h.next('div').is(':visible')?'fas fa-chevron-down':'fas fa-chevron-right';});});"><i style=font-size:x-small class="fas fa-chevron-right"></i><span>Got network tip</span></div><div class=expand-content style=display:none><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
    <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryNetwork/tip&#34;</span>,
    <span style=color:#f92672>&#34;result&#34;</span>: {
        <span style=color:#f92672>&#34;tip&#34;</span>: {
            <span style=color:#f92672>&#34;hash&#34;</span>: <span style=color:#e6db74>&#34;dbafebb0146b2ec45186dfba6c287ad69c83d3fd9a186b39d99ab955631539e0&#34;</span>,
            <span style=color:#f92672>&#34;slot&#34;</span>: <span style=color:#ae81ff>12526684</span>
        }
    },
    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;get-network-tip&#34;</span>
}
</code></pre></div></div></div></li><li><p>Using the <code>tip</code> from the previous response, we can now safely aquire a state on that particular tip which we know exists and is not too old. Ogmios replies successfully with:</p><div class=expand><div class=expand-label style=cursor:pointer onclick="$h=$(this);$h.next('div').slideToggle(100,function(){$h.children('i').attr('class',function(){return $h.next('div').is(':visible')?'fas fa-chevron-down':'fas fa-chevron-right';});});"><i style=font-size:x-small class="fas fa-chevron-right"></i><span>Acquired ledger state</span></div><div class=expand-content style=display:none><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
    <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;acquireLedgerState&#34;</span>,
    <span style=color:#f92672>&#34;result&#34;</span>: {
      <span style=color:#f92672>&#34;acquired&#34;</span>: <span style=color:#e6db74>&#34;ledgerState&#34;</span>,
      <span style=color:#f92672>&#34;point&#34;</span>: {
          <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;dbafebb0146b2ec45186dfba6c287ad69c83d3fd9a186b39d99ab955631539e0&#34;</span>,
          <span style=color:#f92672>&#34;slot&#34;</span>: <span style=color:#ae81ff>12526684</span>
      }
    },
    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;acquire-network-tip&#34;</span>
}
</code></pre></div></div></div></li><li><p>Now in a position to make an actual query, we do it and ask for the stake distribution across all stake pools. The (truncated) response from the server looks like:</p><div class=expand><div class=expand-label style=cursor:pointer onclick="$h=$(this);$h.next('div').slideToggle(100,function(){$h.children('i').attr('class',function(){return $h.next('div').is(':visible')?'fas fa-chevron-down':'fas fa-chevron-right';});});"><i style=font-size:x-small class="fas fa-chevron-right"></i><span>Query response</span></div><div class=expand-content style=display:none><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
    <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/liveStakeDistribution&#34;</span>,
    <span style=color:#f92672>&#34;result&#34;</span>: {
        <span style=color:#f92672>&#34;liveStakeDistribution&#34;</span>: {
            <span style=color:#f92672>&#34;pool1w3s6gk83y2g3670emy3yfjw9myz3u4whph7peah653rmsfegyj3&#34;</span>: {
                <span style=color:#f92672>&#34;stake&#34;</span>: <span style=color:#ae81ff>0</span>,
                <span style=color:#f92672>&#34;vrf&#34;</span>: <span style=color:#e6db74>&#34;29c1a293c550beea756bc0c01416bacd7030ae8992e13ca242d4d6c2aebaac0d&#34;</span>
            },
            <span style=color:#f92672>&#34;pool1n5shd9xdt4s2gm27fxcnuejaqhhmpepn6chw2c82kqnuzdtpsem&#34;</span>: {
                <span style=color:#f92672>&#34;stake&#34;</span>: <span style=color:#ae81ff>0.00003058882418046271</span>,
                <span style=color:#f92672>&#34;vrf&#34;</span>: <span style=color:#e6db74>&#34;7e363eb8bfd8fef018da4c397d6a6ec25998363434e92276e40ee6c706da3ae5&#34;</span>
            },
            <span style=color:#f92672>&#34;...&#34;</span>
        }
    }
}
</code></pre></div></div></div></li></ol><div class="notices warning"><p>Be aware that it is possible for an acquire request to fail even if (and in particular if) made immediately after finding the ledger tip. In Ouroboros Praos frequent small rollbacks of the chain are not rare and the few last blocks of the chain can be a bit volatile. A real application may require more elaborate error handling than the toy example above.</p></div><h2 id=example-queries>Example queries</h2><h3 id=network-1>Network</h3><h4 id=blockheight>blockHeight</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryNetwork/blockHeight&#34;</span>
}
</code></pre></div><h4 id=genesisconfiguration>genesisConfiguration</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryNetwork/genesisConfiguration&#34;</span>,
  <span style=color:#f92672>&#34;params&#34;</span>: {
    <span style=color:#f92672>&#34;era&#34;</span>: <span style=color:#e6db74>&#34;shelley&#34;</span>
  }
}
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryNetwork/genesisConfiguration&#34;</span>,
  <span style=color:#f92672>&#34;params&#34;</span>: {
    <span style=color:#f92672>&#34;era&#34;</span>: <span style=color:#e6db74>&#34;alonzo&#34;</span>
  }
}
</code></pre></div><h4 id=starttime>startTime</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryNetwork/startTime&#34;</span>
}
</code></pre></div><h4 id=tip>tip</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryNetwork/tip&#34;</span>
}
</code></pre></div><h3 id=ledger-state-1>Ledger-state</h3><h4 id=epoch>epoch</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/epoch&#34;</span>
}
</code></pre></div><h4 id=erastart>eraStart</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/eraStart&#34;</span>
}
</code></pre></div><h4 id=erasummaries>eraSummaries</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/eraSummaries&#34;</span>
}
</code></pre></div><h4 id=livestakedistribution>liveStakeDistribution</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/liveStakeDistribution&#34;</span>
}
</code></pre></div><h4 id=projectedrewards>projectedRewards</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/projectedRewards&#34;</span>,
  <span style=color:#f92672>&#34;params&#34;</span>: {
    <span style=color:#f92672>&#34;stake&#34;</span>: [
      <span style=color:#ae81ff>1000000</span>
    ]
  }
}
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/projectedRewards&#34;</span>,
  <span style=color:#f92672>&#34;params&#34;</span>: {
    <span style=color:#f92672>&#34;keys&#34;</span>: [
      <span style=color:#e6db74>&#34;7c16240714ea0e12b41a914f2945784ac494bb19573f0ca61a08afa8&#34;</span>,
      <span style=color:#e6db74>&#34;stake_vkh10stzgpc5ag8p9dq6j98jj3tcftzffwce2ulsefs6pzh6s39tk6l&#34;</span>
    ]
  }
}
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/projectedRewards&#34;</span>,
  <span style=color:#f92672>&#34;params&#34;</span>: {
    <span style=color:#f92672>&#34;scripts&#34;</span>: [
      <span style=color:#e6db74>&#34;7c16240714ea0e12b41a914f2945784ac494bb19573f0ca61a08afa8&#34;</span>,
      <span style=color:#e6db74>&#34;script10stzgpc5ag8p9dq6j98jj3tcftzffwce2ulsefs6pzh6snywdma&#34;</span>
    ]
  }
}
</code></pre></div><h4 id=protocolparameters>protocolParameters</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/protocolParameters&#34;</span>
}
</code></pre></div><h4 id=proposedprotocolparameters>proposedProtocolParameters</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/proposedProtocolParameters&#34;</span>
}
</code></pre></div><h4 id=rewardaccountsummaries>rewardAccountSummaries</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/rewardAccountSummaries&#34;</span>,
  <span style=color:#f92672>&#34;params&#34;</span>: {
    <span style=color:#f92672>&#34;keys&#34;</span>: [
      <span style=color:#e6db74>&#34;7c16240714ea0e12b41a914f2945784ac494bb19573f0ca61a08afa8&#34;</span>,
      <span style=color:#e6db74>&#34;stake_vkh10stzgpc5ag8p9dq6j98jj3tcftzffwce2ulsefs6pzh6s39tk6l&#34;</span>
    ]
  }
}
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/rewardAccountSummaries&#34;</span>,
  <span style=color:#f92672>&#34;params&#34;</span>: {
    <span style=color:#f92672>&#34;scripts&#34;</span>: [
      <span style=color:#e6db74>&#34;7c16240714ea0e12b41a914f2945784ac494bb19573f0ca61a08afa8&#34;</span>,
      <span style=color:#e6db74>&#34;script10stzgpc5ag8p9dq6j98jj3tcftzffwce2ulsefs6pzh6snywdma&#34;</span>
    ]
  }
}
</code></pre></div><h4 id=rewardsprovenance>rewardsProvenance</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/rewardsProvenance&#34;</span>
}
</code></pre></div><h4 id=stakepools>stakePools</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/stakePools&#34;</span>
}
</code></pre></div><h4 id=stakepools-filtered>stakePools (filtered)</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/stakePools&#34;</span>,
  <span style=color:#f92672>&#34;params&#34;</span>: {
    <span style=color:#f92672>&#34;stakePools&#34;</span>: [
      { <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;pool1pk2wzarn9mu64eel89dtg3g8h75c84jsy0q349glpsewgd7sdls&#34;</span> },
      { <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;4acf2773917c7b547c576a7ff110d2ba5733c1f1ca9cdc659aea3a56&#34;</span> }
    ]
  }
}
</code></pre></div><h4 id=ledger-tip>ledger tip</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/tip&#34;</span>
}
</code></pre></div><h4 id=network-tip>network tip</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryNetwork/tip&#34;</span>
}
</code></pre></div><h4 id=utxo>utxo</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/utxo&#34;</span>
}
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;jsonrpc&#34;</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>,
  <span style=color:#f92672>&#34;method&#34;</span>: <span style=color:#e6db74>&#34;queryLedgerState/utxo&#34;</span>,
  <span style=color:#f92672>&#34;params&#34;</span>: {
    <span style=color:#f92672>&#34;outputReferences&#34;</span>: [
      {
        <span style=color:#f92672>&#34;transaction&#34;</span>: { <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;ee155ace9c40292074cb6aff8c9ccdd273c81648ff1149ef36bcea6ebb8a3e25&#34;</span> },
        <span style=color:#f92672>&#34;index&#34;</span>: <span style=color:#ae81ff>2</span>
      }
    ]

  }
}
</code></pre></div><h2 id=errors>Errors</h2><p>Errors from the chain synchronization protocol are in the range <code>2000-2999</code> and are listed below.</p><style>#asyncapi #introduction,#asyncapi #schemas>h2{display:none}#asyncapi .panel-item--center.px-8,#asyncapi .aui-root .py-8,#asyncapi .aui-root .mt-16{padding:0;margin:0}</style><div id=asyncapi></div><link rel=stylesheet href=https://unpkg.com/@asyncapi/react-component@1.0.0-next.47/styles/default.min.css><script src=/js/asyncapi@1.0.0-next.47.js></script><script>AsyncApiStandalone.render({config:{show:{messages:false},},schema:"\nasyncapi: '2.4.0'\ninfo:\n  title: \"\"\n  version: '6.0.0'\nservers: {}\nchannels: {}\ncomponents:\n  schemas:\n    2000:\n      $ref: \"/ogmios.json#/properties/AcquireLedgerStateFailure/properties/error\"\n    2001:\n      $ref: \"/ogmios.json#/properties/QueryLedgerStateEraMismatch/properties/error\"\n    2002:\n      $ref: \"/ogmios.json#/properties/QueryLedgerStateUnavailableInCurrentEra/properties/error\"\n    2003:\n      $ref: \"/ogmios.json#/properties/QueryLedgerStateAcquiredExpire/properties/error\"\n",},document.getElementById('asyncapi'));</script><h2 id=api-reference>API Reference</h2><p>The complete description of the mempool monitoring requests and responses can be found in the <a href=../../api>API reference</a>.</p><p>Plus, <a href=https://github.com/CardanoSolutions/ogmios/tree/master/server/test/vectors>test vectors</a> are available on the repository for testing, debugging and to serve as examples.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/mini-protocols/local-chain-sync/ title="Chain synchronization"><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/mini-protocols/local-tx-submission/ title="Transaction submission" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1693337039></script><script src=/js/perfect-scrollbar.min.js?1693337039></script><script src=/js/perfect-scrollbar.jquery.min.js?1693337039></script><script src=/js/jquery.sticky.js?1693337039></script><script src=/js/featherlight.min.js?1693337039></script><script src=/js/highlight.pack.js?1693337039></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom-3.6.0.js?1693337039></script><script src=/js/learn.js?1693337039></script><script src=/js/hugo-learn.js?1693337039></script></body></html>